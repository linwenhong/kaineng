webpackJsonp([15],{FCYl:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={name:"admin_login",data:function(){return{isCodeLogin:!1,username:null,password:null,access_token:null,Interval:null}},created:function(){localStorage.clear(),this.getLoginCode()},methods:{getLoginCode:function(){var e=this;this.$Service.AdminAuth.loginCode().then(function(t){t.qr_code&&t.access_token&&new QRCode("qrcode",{text:t.qr_code,width:240,height:240,colorDark:"#000000",colorLight:"#ffffff",correctLevel:QRCode.CorrectLevel.H}),e.access_token=t.access_token,e.Interval=setInterval(function(){e.isCodeLogin&&e.codeLogin()},1e3)})},codeLogin:function(){var e=this;this.$Service.AdminAuth.codeLogin({access_token:this.access_token}).then(function(t){t.err_code||(clearInterval(e.Interval),e.$store.dispatch("identity",2),e.$store.dispatch("login",t))})},login:function(){var e=this;if(this.username&&this.password){var t={login_name:this.username,password:this.password};this.$Service.AdminAuth.login(t).then(function(t){t.err_code?toastr.error(t.err_msg,t.err_code):(e.$store.dispatch("identity",2),e.$store.dispatch("login",t))})}else toastr.error("用户名或密码不能为空!")}}},i={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"text-center animated fadeInDown login"},[s("div",{staticClass:"row mt"},[e._m(0),e._v(" "),s("div",{staticClass:"m-t form-horizontal middle-box"},[s("form",{directives:[{name:"show",rawName:"v-show",value:!e.isCodeLogin,expression:"!isCodeLogin"}],staticClass:"form-horizontal",on:{submit:function(t){return t.preventDefault(),e.login(t)}}},[s("div",{staticClass:"form-group"},[s("label",{staticClass:"control-label col-sm-3"},[e._v("账号")]),e._v(" "),s("div",{staticClass:"col-sm-9"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}})])]),e._v(" "),s("div",{staticClass:"form-group"},[s("label",{staticClass:"control-label col-sm-3"},[e._v("密码")]),e._v(" "),s("div",{staticClass:"col-sm-9"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})])]),e._v(" "),s("div",{staticClass:"col-sm-offset-3 col-sm-9"},[s("button",{staticClass:"btn btn-primary block full-width",attrs:{type:"submit"}},[e._v("登 录")]),e._v(" "),s("div",{staticClass:"text-left option"},[s("a",{on:{click:function(t){e.isCodeLogin=!0}}},[e._v("扫码登录")])])])]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.isCodeLogin,expression:"isCodeLogin"}],staticClass:"code_box"},[s("div",{attrs:{id:"qrcode"}}),e._v(" "),s("div",{staticClass:"text-center"},[s("a",{on:{click:function(t){e.isCodeLogin=!1}}},[e._v("账号密码登录")])])])])])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("h1",[this._v("自动售货机"),t("small",[this._v(" (后台管理系统)")])])}]};var n=s("VU/8")(o,i,!1,function(e){s("mMLN")},"data-v-47c3e5a6",null);t.default=n.exports},mMLN:function(e,t){}});
webpackJsonp([8],{KoTh:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={name:"login",data:function(){return{isCodeLogin:!1,username:null,password:null,access_token:null,Interval:null}},created:function(){localStorage.clear(),this.getLoginCode()},methods:{getLoginCode:function(){var t=this;this.$Service.Auth.loginCode().then(function(e){e.qr_code&&e.access_token&&new QRCode("qrcode",{text:e.qr_code,width:240,height:240,colorDark:"#000000",colorLight:"#ffffff",correctLevel:QRCode.CorrectLevel.H}),t.access_token=e.access_token,t.Interval=setInterval(function(){t.isCodeLogin&&t.codeLogin()},1e3)})},codeLogin:function(){var t=this;this.$Service.Auth.codeLogin({access_token:this.access_token}).then(function(e){e.err_code||(clearInterval(t.Interval),t.$store.dispatch("identity",1),t.$store.dispatch("login",e))})},login:function(){var t=this;if(this.username&&this.password){var e={login_name:this.username,password:this.password};this.$Service.Auth.login(e).then(function(e){e.err_code?toastr.error(e.err_msg,e.err_code):(t.$store.dispatch("identity",1),t.$store.dispatch("login",e))})}else toastr.error("用户名或密码不能为空!")},register:function(){this.$router.push("/register")},toAdmin:function(){this.$router.push("/admin-login")}}},i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"text-center animated fadeInDown login"},[s("a",{staticClass:"admin",on:{click:function(e){t.toAdmin()}}},[t._v("管理员登录？")]),t._v(" "),s("div",{staticClass:"row mt"},[t._m(0),t._v(" "),s("div",{staticClass:"m-t form-horizontal middle-box"},[s("form",{directives:[{name:"show",rawName:"v-show",value:!t.isCodeLogin,expression:"!isCodeLogin"}],staticClass:"form-horizontal",on:{submit:function(e){return e.preventDefault(),t.login(e)}}},[s("div",{staticClass:"form-group"},[s("label",{staticClass:"control-label col-sm-3"},[t._v("账号")]),t._v(" "),s("div",{staticClass:"col-sm-9"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{staticClass:"control-label col-sm-3"},[t._v("密码")]),t._v(" "),s("div",{staticClass:"col-sm-9"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"col-sm-offset-3 col-sm-9"},[s("button",{staticClass:"btn btn-primary block full-width",attrs:{type:"submit"}},[t._v("登 录")]),t._v(" "),s("div",{staticClass:"text-left option"},[s("a",{on:{click:function(e){t.isCodeLogin=!0}}},[t._v("扫码登录")])]),t._v(" "),s("div",{staticClass:"text-right option"},[s("a",{on:{click:function(e){t.register()}}},[t._v("去注册？")])])])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isCodeLogin,expression:"isCodeLogin"}],staticClass:"code_box"},[s("div",{attrs:{id:"qrcode"}}),t._v(" "),s("div",{staticClass:"text-center"},[s("a",{on:{click:function(e){t.isCodeLogin=!1}}},[t._v("账号密码登录")])])])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",[this._v("自动售货机"),e("small",[this._v(" (商户管理系统)")])])}]};var n=s("VU/8")(o,i,!1,function(t){s("bmwi")},"data-v-7571c059",null);e.default=n.exports},bmwi:function(t,e){}});